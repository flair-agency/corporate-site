@config "../tailwind.config.js";

@import "tailwindcss";

@import "./business.css";
@import "./company.css";
@import "./creator.css";
@import "./privacy-policy.css";

@layer base {
  /* TOKENS */
  :root {
    --brand: #ff5a3c;
    --brand-accent-bg: #fff3ef;
    --brand-accent-border: #ffb9a7;
    --brand-chip-border: #ffd0c5;
    --brand-chip-bg: #fff7f5;
    --brand-chip-text: #9a3412;
    --brand-chip-accent-border: #fdba74;
    --brand-chip-accent-bg: #fff3e8;

    --cool-head: #0f172a;
    --cool-body: #334155;

    --font-fallback-sans:
      "Hiragino Kaku Gothic ProN", "Hiragino Sans", "Yu Gothic", "Meiryo",
      system-ui, -apple-system, "Segoe UI", sans-serif;
    --font-family-sans: "Inter", var(--font-fallback-sans);

    --text-body: #333;
    --text-muted: #666;
    --page-bg: #f7f7f7;
    --white: #fff;
    --section-bg: #fff;
    --section-border: #e5e7eb;
    --section-text: #111827;
    --hero-fallback-bg: #1a202c;
    --hero-overlay-bg: rgba(0, 0, 0, 0.2);
    --hero-title-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);

    --radius-base: 0.5rem;
    --radius-pill: 999px;
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
    --shadow-brand-hover: 0 6px 18px rgba(255, 90, 60, 0.25);

    --hero-height: clamp(520px, 70vh, 680px);
    --section-pad-y: 4rem;
    --section-pad-x: 1rem;
    --section-margin-y: 2rem;
    --section-margin-x: 1rem;

    --header-bg: rgba(255, 255, 255, 0.9);
    --header-border: #eee;
    --header-blur: saturate(180%) blur(10px);

    --on-page-link: #374151;
    --on-page-link-hover-bg: #fff1ee;
    --on-page-link-hover-text: #111827;
    --on-page-link-active-bg: var(--brand);
    --on-page-link-active-text: #fff;
    --on-page-scrollbar-thumb: #e5e7eb;

    --on-site-text: #6b7280;
    --on-site-link: #e5e7eb;
    --on-site-link-hover-bg: #374151;
    --on-site-link-hover-text: #fff;
    --on-site-link-current-bg: #fff;
    --on-site-link-current-text: #111827;
    --on-site-link-current-border: #e5e7eb;

    --underline-cool-from: #3b82f6;
    --underline-cool-to: #22d3ee;
    --underline-warm-from: var(--brand);
    --underline-warm-to: #f59e0b;
  }

  html {
    @apply scroll-smooth;
  }

  body {
    @apply bg-(--page-bg) leading-[1.8] font-(family-name:--font-family-sans) text-(--text-body) [text-rendering:optimizeLegibility];

    & > header,
    & > footer {
      @apply mx-auto max-w-275;
    }

    & > main {
      @apply mx-auto w-full max-w-6xl px-4;
    }
  }

  img[width][height] {
    @apply h-auto;
  }

  [id] {
    @apply scroll-mt-22;
  }

  main > section {
    @apply mx-(--section-margin-x) my-(--section-margin-y) px-(--section-pad-x) py-(--section-pad-y);
  }

  ul,
  ol {
    @apply ml-0 list-outside pl-5;
  }

  ul ul,
  ul ol,
  ol ul,
  ol ol {
    @apply pl-5;
  }
}

@layer components {
  body > header {
    @apply sticky top-0 z-50 flex items-center justify-between gap-3 border-b border-(--header-border) bg-linear-to-b from-(--page-bg) from-0% via-[rgba(255,255,255,.9)] via-40% to-(--header-bg) to-100% px-4 pt-[calc(env(safe-area-inset-top)+.5rem)] pb-3 shadow-sm backdrop-filter-(--header-blur);
  }

  body > footer {
    @apply bg-linear-to-b from-[rgba(15,23,42,.04)] from-0% via-[rgba(15,23,42,.02)] via-35% to-(--page-bg) to-100% px-6 pt-6 pb-[calc(env(safe-area-inset-bottom)+.5rem)] text-center text-[#4b5563];

    ul.note {
      @apply w-fit list-["※"] pl-4;

      li {
        @apply pl-1 text-xs text-gray-600 marker:text-[.5rem];

        small {
          @apply text-[size:inherit];
        }
      }
    }
  }

  body > main > section {
    & {
      & > hgroup {
        @apply mb-10 text-center;

        & > h2 {
          @apply text-2xl font-bold text-gray-800 md:text-3xl;

          & + .accentline {
            @apply w-20;
          }

          & ~ p {
            @apply mt-4 text-base text-gray-500 md:text-lg;
          }
        }
      }
    }

    &[data-variant~="cool"] {
      @apply bg-linear-[180deg] from-[rgba(255,255,255,0)] to-[rgba(37,99,235,0.06)];

      & > hgroup > h2 {
        @apply text-(--cool-head);

        & + .accentline {
          @apply bg-linear-to-r from-(--underline-cool-from) to-(--underline-cool-to);
        }
      }

      &,
      & p,
      & li,
      & h3,
      & h4 {
        @apply text-(--cool-body);
      }

      .chip {
        @apply border-blue-200 bg-blue-50 text-blue-700;
      }

      .cta.btn {
        @apply bg-blue-600 hover:shadow-[0_6px_18px_rgba(37,99,235,0.25)];
      }
    }

    &.hero {
      @apply relative isolate z-1 mx-4 mt-8 mb-2 flex min-h-(--hero-height) flex-col justify-center overflow-hidden rounded-lg bg-(--hero-fallback-bg) bg-cover bg-center text-center text-(--white) transition-[background-image_0.5s_ease-in-out];

      &::before {
        @apply absolute inset-0 -z-10 rounded-(--radius-base) bg-(--hero-overlay-bg) content-[""];
      }

      & > hgroup > h2 {
        @apply mb-4 text-3xl leading-[1.3] font-bold text-inherit text-shadow-(--hero-title-shadow) md:text-5xl;

        & + p {
          @apply mx-auto mb-6 max-w-2xl text-base text-inherit opacity-90 md:text-lg;
        }
      }

      & > .indicator {
        @apply absolute bottom-6 left-1/2 z-20;
      }
    }

    &.panel {
      @apply mx-4 mt-8 rounded-lg bg-white shadow-lg;
    }

    &.band {
      @apply mx-auto my-8 max-w-275 px-4 py-16;
    }
  }

  nav.on-page {
    @apply flex flex-1 items-center justify-end gap-3;

    & > button.toggle {
      @apply hidden h-10 w-10 items-center justify-center;

      & + menu {
        @apply flex flex-1 flex-nowrap gap-2.5 overflow-x-auto px-0 py-1.5 whitespace-nowrap;

        &::-webkit-scrollbar {
          @apply h-1.5;
        }

        &::-webkit-scrollbar-thumb {
          @apply rounded-full bg-(--on-page-scrollbar-thumb);
        }

        li a {
          @apply rounded-full px-2.5 py-2 text-[13px] text-(--on-page-link) hover:bg-(--on-page-link-hover-bg) hover:text-(--on-page-link-hover-text);

          &[data-state~="active"] {
            @apply bg-(--on-page-link-active-bg) text-(--on-page-link-active-text);
          }
        }
      }

      @media (max-width: 767px) {
        html.js & {
          @apply inline-flex;

          & + menu {
            @apply absolute top-[calc(env(safe-area-inset-top)+3rem)] right-4 z-60 hidden min-w-55 flex-col flex-nowrap rounded-xl bg-[rgba(255,255,255,0.96)] p-2.5 shadow-[0_14px_36px_rgba(0,0,0,0.12)];

            li a {
              @apply block px-3 py-2.5;
            }
          }

          &[aria-expanded="true"] + menu {
            @apply flex flex-wrap;
          }
        }

        html.no-js & {
          @apply hidden!;
        }
      }
    }
  }

  nav.on-site {
    @apply mb-2.5 flex justify-center;

    & > menu {
      @apply flex flex-col items-center gap-4 text-xs whitespace-nowrap text-(--on-site-text) sm:flex-row sm:items-start sm:gap-8;

      li a {
        @apply rounded-(--radius-pill) border border-transparent px-2.5 py-1.5 hover:bg-[rgba(15,23,42,0.06)];

        &[aria-current="page"] {
          @apply border-[rgba(15,23,42,0.12)] bg-[rgba(15,23,42,0.08)] text-[#0f172a];
        }
      }
    }
  }

  .stickers {
    @apply grid justify-items-end gap-[.45rem];

    .sticker {
      @apply inline-block rounded-full border border-[rgba(255,255,255,.46)] px-[.82rem] py-[.42rem] text-[clamp(.72rem,2.6vw,.82rem)] leading-none font-bold tracking-[.02em] text-[#111827] shadow-[0_4px_14px_rgba(15,23,42,.1)] backdrop-blur-[6px] will-change-transform motion-reduce:animate-none!;

      @media (max-width: 640px) {
        @apply px-[.64rem] py-[.33rem] text-[.67rem];
      }

      &.s1 {
        @apply animate-[stickerFloat_2.7s_0s_ease-in-out_infinite];
      }

      &.s2 {
        @apply animate-[stickerFloat_2.7s_.45s_ease-in-out_infinite];
      }

      &.s3 {
        @apply animate-[stickerFloat_2.7s_.9s_ease-in-out_infinite];
      }
    }
  }

  details.faq {
    @apply rounded-xl border border-gray-200/70 bg-[#f9fafb] p-4 shadow-[0_1px_0_rgba(15,23,42,0.02)] transition-[transform,box-shadow,border-color,background-color] duration-200;

    &:hover {
      @apply -translate-y-0.5 shadow-[0_10px_22px_rgba(15,23,42,0.06)];
    }

    &:open {
      @apply border-(--accent-line) bg-[rgba(220,38,38,0.03)];
    }

    &.light {
      @apply bg-white shadow-sm;

      &:open {
        @apply border-(--accent-line) bg-white;
      }
    }

    summary {
      @apply relative flex cursor-pointer list-none items-start justify-between gap-3 pl-10 font-bold text-gray-800;

      /* Q badge */
      &::before {
        @apply absolute top-0.5 left-0 grid h-7 w-7 place-items-center rounded-full border border-(--accent-line) bg-(--accent-weak) text-[0.72rem] font-extrabold text-(--accent-strong) content-["Q"];
      }

      /* Chevron */
      &::after {
        @apply mt-0.5 text-gray-400 transition-transform duration-200 content-["▾"];
      }

      &:focus-visible {
        @apply ring-2 ring-(--accent-line) ring-offset-2 outline-none;
      }
    }

    &:open summary::after {
      @apply transform-[rotate(180deg)];
    }

    ol {
      @apply list-outside list-decimal space-y-1 pl-10;
    }

    footer {
      @apply mt-2;
    }

    /* Answer */
    summary + * {
      @apply relative mt-3 pl-10 leading-7 text-gray-700 [ol]:pl-15;

      &::before {
        @apply absolute top-0.5 left-0 grid h-7 w-7 place-items-center rounded-full border border-(--accent-line) bg-white text-[0.72rem] font-extrabold text-(--accent-strong) content-["A"];
      }
    }
  }

  table.compare {
    @apply border-separate border-spacing-0 overflow-hidden rounded-lg text-left text-sm;

    thead {
      @apply bg-gray-50;

      th {
        @apply border-gray-200 p-3 text-center align-bottom first:text-right;

        @media (max-width: 480px) {
          @apply text-[.82rem] leading-[1.55] whitespace-normal;
        }
      }
    }

    tbody {
      tr {
        @apply odd:bg-white even:bg-gray-50;

        td {
          @apply border-gray-100 p-3 text-center;

          &:first-child {
            @apply text-right font-medium;
          }

          @media (max-width: 480px) {
            @apply text-[.82rem] leading-[1.55] whitespace-normal;
          }
        }
      }
    }

    .chip {
      @apply mb-0 ml-1 bg-[#fee2e2] px-2 py-0.5 text-xs text-(--accent-strong);

      @media (max-width: 480px) {
        @apply ml-1 text-[.65rem];
      }
    }
  }

  ol.flow {
    @apply list-none px-4 [counter-reset:step];

    li {
      @apply relative flex flex-col justify-between rounded-lg border border-gray-200 bg-gray-50 p-6 pl-12 transition-[background-color,box-shadow,transform] duration-200 hover:-translate-y-1;

      &::before {
        @apply absolute top-4 left-4 grid h-6 w-6 place-items-center rounded-full bg-(--accent) text-xs font-bold text-white shadow-[0_0_0_3px_#fff] content-[attr(data-step)];
      }

      &:hover {
        @apply -translate-y-0.5 transform shadow-[0_8px_16px_rgba(15,23,42,0.08)];
      }

      h4 {
        @apply font-bold;
      }

      p {
        @apply mt-3 text-sm text-gray-700;
      }
    }

    @media (max-width: 480px) {
      @apply gap-[.9rem];

      li {
        @apply pl-[2.9rem];

        &::before {
          @apply h-[1.35rem] w-[1.35rem] text-[.72rem];
        }
      }
    }
  }

  nav > ul.accounts {
    @apply flex flex-wrap items-center gap-3 pl-0;

    & > li a {
      @apply rounded-lg border border-gray-200 px-3 py-2 transition *:hidden hover:bg-gray-100;
    }
  }

  a.hyperlink {
    @apply underline decoration-slate-300 decoration-1 underline-offset-4 hover:decoration-slate-500 focus:outline-none focus-visible:ring-2 focus-visible:ring-slate-300 active:decoration-slate-700;
  }

  blockquote.letter {
    @apply relative isolate overflow-hidden border border-amber-100 bg-amber-50/70 p-8 font-[Zen_Kurenaido,var(--font-fallback-sans)] text-gray-700 shadow-sm sm:p-10;

    &::before {
      @apply pointer-events-none absolute inset-0 z-0 bg-[url("/assets/logo.svg")] bg-size-[420px_auto] bg-center bg-no-repeat opacity-5 content-[""];
    }

    & > * {
      @apply relative z-10;
    }

    p {
      @apply my-3;

      &.signature {
        @apply mt-8 text-right;
      }
    }
  }

  .card[data-variant~="media"] {
    @apply pointer-events-none -translate-x-1/2 -translate-y-1/2 transform-[translateZ(0)] self-stretch overflow-hidden bg-[rgba(0,0,0,0.05)] shadow-[0_20px_40px_rgba(0,0,0,.25)] will-change-transform contain-layout contain-size;

    &[data-aspect="9/16"] {
      @apply aspect-9/16;
    }

    video {
      @apply block h-full w-full object-cover object-[50%_20%] lg:object-center;
    }
  }

  /* Small primitives */
  .chip {
    @apply mb-2.5 inline-block rounded-(--radius-pill) border border-(--brand-chip-border) bg-(--brand-chip-bg) px-2.5 py-1.5 text-xs tracking-[0.12em] text-(--brand-chip-text);

    &[data-variant~="accent"] {
      @apply border-(--brand-chip-accent-border) bg-(--brand-chip-accent-bg);
    }
  }

  .cta {
    @apply mt-[clamp(20px,5vw,36px)] text-center;

    &.note {
      @apply mt-2.5 text-sm text-[#666];

      a {
        @apply text-(--brand) underline;
      }
    }

    &.btn {
      @apply inline-block rounded-full bg-(--brand) px-5 py-3 font-bold text-white no-underline transition-[transform_.08s_ease,box-shadow_.2s_ease] hover:-translate-y-px hover:shadow-[0_6px_18px_rgba(255,90,60,0.25)];

      &[data-variant~="secondary"] {
        @apply border border-gray-300 bg-inherit font-[weight:inherit] text-gray-700 hover:shadow-none;
      }
    }
  }

  .accentline {
    @apply mx-auto mt-2 mb-0 h-1 rounded-full bg-linear-to-r from-(--underline-warm-from) to-(--underline-warm-to);
  }

  .logo {
    @apply block aspect-7/5 h-auto w-17.5 max-w-full rounded-(--radius-base) object-contain;
  }

  .indicator {
    @apply flex -translate-x-1/2 flex-col items-center gap-2 text-slate-500;

    .label {
      @apply text-[11px] tracking-[0.2em];
    }

    .icon {
      @apply grid h-8 w-8 animate-bounce place-items-center rounded-full border border-slate-300;
    }
  }
  .statement {
    @apply relative pt-4 pr-0 pb-0 pl-4.5 font-[Zen_Kurenaido,var(--font-fallback-sans)];

    &::before {
      @apply mx-0 mt-0 mb-2.5 block text-xs tracking-[0.12em] text-[rgba(0,0,0,0.45)] uppercase content-["STATEMENT"];
    }

    &::after {
      @apply absolute top-0 bottom-0 left-0 w-px bg-[rgba(0,0,0,0.12)] content-[""];
    }

    p {
      @apply m-0 text-[1.04em] leading-[1.95] tracking-[.01em] text-[rgba(0,0,0,.78)];
    }

    strong {
      @apply font-bold text-[rgba(0,0,0,.92)];
    }

    @media (max-width: 480px) {
      @apply mx-0 mt-5.5 mb-2 pl-3.5;

      &::before {
        @apply text-[11px] tracking-[.14em];
      }

      p {
        @apply text-[1em];
      }
    }
  }
}

@layer utilities {
  .full-bleed {
    @apply relative right-1/2 left-1/2 -mx-[50vw] w-screen;
  }

  :is(.fab, .far, .fas)[data-animate="true"] {
    @apply motion-reduce:animate-none!;

    &::before {
      @apply origin-[50%_50%] animate-[iconPop_600ms_cubic-bezier(.2,.8,.2,1)_both];
    }
  }

  [data-animate][data-direction] {
    @apply opacity-0;

    @media (prefers-reduced-motion: reduce) {
      @apply transform-none! animate-none! opacity-1! transition-none!;
    }

    &[data-animate="true"] {
      @apply translate-x-0 translate-y-0 opacity-100 transition-all duration-300 ease-out;
    }

    &:where(&[data-direction="left"]) {
      @apply -translate-x-6;
    }

    &:where([data-direction="right"]) {
      @apply translate-x-6;
    }

    &:where([data-direction="up"]) {
      @apply translate-y-4;
    }
  }
}

@keyframes iconPop {
  0% {
    transform: scale(0.88) rotate(-1.2deg);
  }

  55% {
    transform: scale(1.14) rotate(0.8deg);
  }

  80% {
    transform: scale(0.98) rotate(0deg);
  }

  100% {
    transform: scale(1) rotate(0deg);
  }
}

@keyframes stickerFloat {
  0% {
    transform: translateY(0) rotate(-1deg);
  }

  50% {
    transform: translateY(-3px) rotate(0.8deg);
  }

  100% {
    transform: translateY(0) rotate(-1deg);
  }
}
