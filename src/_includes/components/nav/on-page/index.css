nav.on-page {
  /* Flex */
  @apply flex items-center justify-end;
  /* Layout */
  @apply relative z-61 gap-3;

  & > button.toggle {
    /* Layout */
    @apply relative z-61 hidden h-10 w-10;
    /* Flex */
    @apply items-center justify-center;

    & + menu {
      /* Flex */
      @apply flex flex-nowrap;
      /* Layout */
      @apply gap-2.5 overflow-x-auto px-0 py-1.5 whitespace-nowrap;

      &::-webkit-scrollbar {
        /* Layout */
        @apply h-1.5;
      }

      &::-webkit-scrollbar-thumb {
        /* Background */
        @apply bg-(--palette-neutral-200);
        /* Border */
        @apply rounded-full;
      }

      li a {
        /* Text */
        @apply text-(--palette-neutral-700) text-sm;
        /* Layout */
        @apply px-2.5 py-2;
        /* Background */
        @apply hover:bg-(--palette-coral-150);
        /* Text */
        @apply hover:text-ink--secondary;
        /* Border */
        @apply rounded-full;

        &[data-state~="active"] {
          /* Background */
          @apply bg-brand;
          /* Text */
          @apply text-ink--inverse;
        }
      }
    }

    @media (max-width: 767px) {
      html.js & {
        /* Flex */
        @apply inline-flex;

        & + menu {
          /* Background */
          @apply bg-white/96;
          /* Effects */
          @apply shadow-[0_14px_36px_black/12];
          /* Layout */
          @apply absolute top-[calc(env(safe-area-inset-top)+1.75rem)] right-4 z-62 hidden min-w-55 p-2.5;
          /* Flex */
          @apply flex-col flex-nowrap;
          /* Border */
          @apply rounded-xl;

          li a {
            /* Layout */
            @apply block px-3 py-2.5;
          }
        }

        &[aria-expanded="true"] + menu {
          /* Flex */
          @apply flex flex-wrap;
        }
      }

      html.no-js & {
        /* Layout */
        @apply hidden!;
      }
    }
  }
}

/* ===== Mobile menu backdrop (pseudo-element) ===== */
@media (max-width: 767px) {
  html.js body:has(nav.on-page) {
    &::before {
      /* Background */
      @apply bg-black/40;
      /* Layout */
      @apply pointer-events-none fixed inset-0 z-49 opacity-0;
      /* Animation */
      @apply transition-opacity duration-200;
      /* Generated Content */
      @apply content-[""];
    }

    &:has(nav.on-page > button.toggle[aria-expanded="true"])::before {
      /* Layout */
      @apply pointer-events-auto opacity-100;
    }
  }
}
